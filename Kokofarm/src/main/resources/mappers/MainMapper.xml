<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kokofarm.main.mapper.MainMapper">
	<cache/>
	
	<select id="main_list" resultType="ProductVO">
		select * from main_image
	</select>
	
	<select id="proD_Info" resultType="ProductVO">
		select * from product where product_no = #{pNo}
	</select>

	<select id="list_main" parameterType="java.util.HashMap" resultType="ProductVO">
		select * from product	where
		product_total <![CDATA[ >]]>0
			
				<if test="ca1 != null">
					and ca1 = #{ca1}
				</if>
				<if test="ca2 != null">
					and ca2 = #{ca2}
				</if>
				<if test="ca3 != null">
					and ca3 = #{ca3}
				</if>
							
			order by product_uploaddate desc
		</select> 
			
			
			
<sql id="search">
		<if test="searchType != null">
			<if test="searchType 	== 't'.toString()"> 
				and title like '%'|| #{keyword}||'%' </if>			
		</if>
	</sql>

<select id="countPaging" resultType="int">
	 <![CDATA[
	 
	  select count(product_no) from product
	 
	  ]]>
	</select>

<select id="listSearch" resultType="ProductVO" parameterType="SearchCriteria"> 
		<![CDATA[ select * from product]]>
		<include refid="search"></include> 
		<![CDATA[ order by product_uploaddate desc ]]>
	</select>
	
	<select id="listSearchCount" resultType="int" parameterType="SearchCriteria">
	
	 <![CDATA[ select count(product_no) from product
		 ]]>
		<include refid="search"></include>
	</select>

</mapper>